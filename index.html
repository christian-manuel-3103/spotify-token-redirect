<!DOCTYPE html>
<html>
  <head>
    <title>Spotify Redirect</title>
    <script type="text/javascript">
      // This script extracts the access token from URL hash and redirects back to the app with a custom scheme
      window.onload = function() {
        const hash = window.location.hash.substr(1); // remove the #
        const params = new URLSearchParams(hash);
        const accessToken = params.get('access_token');
        if (accessToken) {
          // Redirect to your app scheme with access_token in fragment
          window.location.href = 'melodate://callback#access_token=' + accessToken;
        } else {
          document.body.innerHTML = "<h3>Error: Access token not found in URL.</h3>";
        }
      }
    </script>
  </head>
  <body>
    <h3>Processing login...</h3>
  </body>
</html>
